{"ast":null,"code":"const ADD_POST = 'ADD-POST';\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT';\nconst initialState = {\n  posts: [{\n    id: 1,\n    message: \"This is my first post.\",\n    likesCount: 12\n  }, {\n    id: 1,\n    message: \"Second post. Hello everybody\",\n    likesCount: 11\n  }],\n  newPostText: \"it-kamasutra\"\n};\n\nconst profileReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //debugger\n  //********* POST: ADD_POST **** ****/\n  if (action.type === ADD_POST) {\n    const stateCopy = { ...state,\n      newPostText: '',\n      posts: [...state.posts, {\n        id: 3,\n        message: state.newPostText,\n        likesCount: 0\n      }]\n    };\n    ret;\n    /*         const newPost = {\n              id: 3,\n              message: state.newPostText,\n              likesCount: 0,\n            }; */\n    //const stateCopy = {...state}\n    //const stateCopy = JSON.parse(JSON.stringify(state)); //потому, что меняем значение внутреннего объекта\n    //stateCopy.posts.push(newPost);\n    //thiseCopy.newPostText = '';\n    //this._callSubscriber(this._state);\n    //const stateCopy = JSON.parse(JSON.stringify(state)); //потому, что меняем значение внутреннего объекта\n    //stateCopy.posts.push(newPost);\n    //thiseCopy.newPostText = '';\n\n    state.posts.push(newPost);\n    state.newPostText = ''; //this._callSubscriber(this._state);\n    //return {...state}; // раз это признак перемен, то сделаем поверхностное копирование для сигнала рендеринга\n    //не будем делать полное копирование объекта, хотя надо бы\n    //return stateCopy;\n  } //*********POST: UPDATE_NEW_POST_TEXT ********/\n\n\n  if (action.type === UPDATE_NEW_POST_TEXT) {\n    //state.newPostText = action.newText;\n    //this._callSubscriber(this._state);\n    return { ...state,\n      newPostText: action.newText\n    }; //можно и так, меняем значение только в поверхностных свойствах\n  }\n\n  return state;\n};\n\nconst addPostActionCreator = () => ({\n  type: ADD_POST\n});\n\nconst updateNewPostTextActionCreator = text => ({\n  type: UPDATE_NEW_POST_TEXT,\n  newText: text\n});\n\nexport { addPostActionCreator, updateNewPostTextActionCreator };\nexport default profileReducer;","map":{"version":3,"names":["ADD_POST","UPDATE_NEW_POST_TEXT","initialState","posts","id","message","likesCount","newPostText","profileReducer","state","action","type","stateCopy","ret","push","newPost","newText","addPostActionCreator","updateNewPostTextActionCreator","text"],"sources":["/home/roman/wwwl/85_react/react_kabzda2/src/redux/reducer-profile.js"],"sourcesContent":["\nconst ADD_POST = 'ADD-POST'\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT'\n\nconst initialState = {\n  posts: [\n    { id: 1, message: \"This is my first post.\", likesCount: 12 },\n    { id: 1, message: \"Second post. Hello everybody\", likesCount: 11 },\n  ],\n  newPostText: \"it-kamasutra\",\n}\n\nconst profileReducer = (state=initialState, action) => {\n    //debugger\n    //********* POST: ADD_POST **** ****/\n    if (action.type === ADD_POST) {\n\n      const stateCopy = {\n        ...state,\n        newPostText: '',\n        posts: [...state.posts, {\n          id: 3,\n          message: state.newPostText,\n          likesCount: 0,\n        }]\n      }\n      ret\n/*         const newPost = {\n          id: 3,\n          message: state.newPostText,\n          likesCount: 0,\n        }; */\n        //const stateCopy = {...state}\n        //const stateCopy = JSON.parse(JSON.stringify(state)); //потому, что меняем значение внутреннего объекта\n        //stateCopy.posts.push(newPost);\n        //thiseCopy.newPostText = '';\n        //this._callSubscriber(this._state);\n\n        //const stateCopy = JSON.parse(JSON.stringify(state)); //потому, что меняем значение внутреннего объекта\n        //stateCopy.posts.push(newPost);\n        //thiseCopy.newPostText = '';\n        state.posts.push(newPost);\n        state.newPostText = '';\n        //this._callSubscriber(this._state);\n        //return {...state}; // раз это признак перемен, то сделаем поверхностное копирование для сигнала рендеринга\n        //не будем делать полное копирование объекта, хотя надо бы\n        //return stateCopy;\n      }\n      //*********POST: UPDATE_NEW_POST_TEXT ********/\n      if (action.type === UPDATE_NEW_POST_TEXT) {\n        //state.newPostText = action.newText;\n        //this._callSubscriber(this._state);\n        return {...state, newPostText: action.newText}; //можно и так, меняем значение только в поверхностных свойствах\n      }\n\n    return state\n}\n\n\nconst addPostActionCreator = () => ({type: ADD_POST});\n\nconst updateNewPostTextActionCreator = text => (\n  {\n    type: UPDATE_NEW_POST_TEXT,\n    newText: text\n  }\n);\n\nexport {addPostActionCreator, updateNewPostTextActionCreator}\nexport default profileReducer"],"mappings":"AACA,MAAMA,QAAQ,GAAG,UAAjB;AACA,MAAMC,oBAAoB,GAAG,sBAA7B;AAEA,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,CACL;IAAEC,EAAE,EAAE,CAAN;IAASC,OAAO,EAAE,wBAAlB;IAA4CC,UAAU,EAAE;EAAxD,CADK,EAEL;IAAEF,EAAE,EAAE,CAAN;IAASC,OAAO,EAAE,8BAAlB;IAAkDC,UAAU,EAAE;EAA9D,CAFK,CADY;EAKnBC,WAAW,EAAE;AALM,CAArB;;AAQA,MAAMC,cAAc,GAAG,YAAgC;EAAA,IAA/BC,KAA+B,uEAAzBP,YAAyB;EAAA,IAAXQ,MAAW;;EACnD;EACA;EACA,IAAIA,MAAM,CAACC,IAAP,KAAgBX,QAApB,EAA8B;IAE5B,MAAMY,SAAS,GAAG,EAChB,GAAGH,KADa;MAEhBF,WAAW,EAAE,EAFG;MAGhBJ,KAAK,EAAE,CAAC,GAAGM,KAAK,CAACN,KAAV,EAAiB;QACtBC,EAAE,EAAE,CADkB;QAEtBC,OAAO,EAAEI,KAAK,CAACF,WAFO;QAGtBD,UAAU,EAAE;MAHU,CAAjB;IAHS,CAAlB;IASAO,GAAG;IACT;AACA;AACA;AACA;AACA;IACQ;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;;IACAJ,KAAK,CAACN,KAAN,CAAYW,IAAZ,CAAiBC,OAAjB;IACAN,KAAK,CAACF,WAAN,GAAoB,EAApB,CA3B0B,CA4B1B;IACA;IACA;IACA;EACD,CAnCgD,CAoCjD;;;EACA,IAAIG,MAAM,CAACC,IAAP,KAAgBV,oBAApB,EAA0C;IACxC;IACA;IACA,OAAO,EAAC,GAAGQ,KAAJ;MAAWF,WAAW,EAAEG,MAAM,CAACM;IAA/B,CAAP,CAHwC,CAGQ;EACjD;;EAEH,OAAOP,KAAP;AACH,CA5CD;;AA+CA,MAAMQ,oBAAoB,GAAG,OAAO;EAACN,IAAI,EAAEX;AAAP,CAAP,CAA7B;;AAEA,MAAMkB,8BAA8B,GAAGC,IAAI,KACzC;EACER,IAAI,EAAEV,oBADR;EAEEe,OAAO,EAAEG;AAFX,CADyC,CAA3C;;AAOA,SAAQF,oBAAR,EAA8BC,8BAA9B;AACA,eAAeV,cAAf"},"metadata":{},"sourceType":"module"}