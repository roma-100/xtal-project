{"ast":null,"code":"const UPDATE_NEW_MESSAGE_BODY = 'UPDATE-NEW-MESSAGE-BODY';\nconst SEND_MESSAGE = 'SEND-MESSAGE';\nconst initialState = {\n  dialogs: [{\n    id: 1,\n    name: \"Josefina\"\n  }, {\n    id: 2,\n    name: \"Dima\"\n  }, {\n    id: 3,\n    name: \"Roman\"\n  }, {\n    id: 4,\n    name: \"Greg\"\n  }, {\n    id: 5,\n    name: \"Nadya\"\n  }, {\n    id: 6,\n    name: \"Masha\"\n  }],\n  messages: [{\n    id: 1,\n    message: \"Hi !\"\n  }, {\n    id: 2,\n    message: \"How are you?\"\n  }, {\n    id: 3,\n    message: \"Sheat happens\"\n  }],\n  newMessageBody: ''\n};\n\nconst dialogsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //debugger\n  //*********MESSAGE: UPDATE_NEW_MESSAGE_BODY ********/\n  if (action.type === UPDATE_NEW_MESSAGE_BODY) {\n    const stateCopy = JSON.parse(JSON.stringify(state)); //console.log(action.messageBody)\n\n    stateCopy.newMessageBody = action.messageBody; //this._callSubscriber(this._state);\n\n    return stateCopy;\n  } //*********MESSAGE: SEND_MESSAGE ********/\n\n\n  if (action.type === SEND_MESSAGE) {\n    const stateCopy = JSON.parse(JSON.stringify(state));\n    const messageBody = stateCopy.newMessageBody;\n    stateCopy.messages.push({\n      id: 5,\n      message: messageBody\n    });\n    /* ************* messages: [\n      { id: 1, message: \"Hi !\" }, */\n\n    stateCopy.newMessageBody = ''; //this._callSubscriber(this._state);\n\n    return state;\n  }\n\n  return state;\n};\n\nconst sendMessageCreator = () => ({\n  type: SEND_MESSAGE\n});\n\nconst updateNewMessageBodyCreator = msgBody => ({\n  type: UPDATE_NEW_MESSAGE_BODY,\n  messageBody: msgBody\n});\n\nexport { sendMessageCreator, updateNewMessageBodyCreator };\nexport default dialogsReducer;","map":{"version":3,"names":["UPDATE_NEW_MESSAGE_BODY","SEND_MESSAGE","initialState","dialogs","id","name","messages","message","newMessageBody","dialogsReducer","state","action","type","stateCopy","JSON","parse","stringify","messageBody","push","sendMessageCreator","updateNewMessageBodyCreator","msgBody"],"sources":["/home/roman/wwwl/85_react/react_kabzda2/src/redux/reducer-dialogs.js"],"sourcesContent":["\nconst UPDATE_NEW_MESSAGE_BODY = 'UPDATE-NEW-MESSAGE-BODY'\nconst SEND_MESSAGE = 'SEND-MESSAGE'\n\nconst initialState = {\n  dialogs: [\n    { id: 1, name: \"Josefina\" },\n    { id: 2, name: \"Dima\" },\n    { id: 3, name: \"Roman\" },\n    { id: 4, name: \"Greg\" },\n    { id: 5, name: \"Nadya\" },\n    { id: 6, name: \"Masha\" },\n  ],\n  messages: [\n    { id: 1, message: \"Hi !\" },\n    { id: 2, message: \"How are you?\" },\n    { id: 3, message: \"Sheat happens\" },\n  ],\n  newMessageBody: ''\n}\n\nconst dialogsReducer = (state=initialState, action) => {\n  //debugger\n    //*********MESSAGE: UPDATE_NEW_MESSAGE_BODY ********/\n    if (action.type === UPDATE_NEW_MESSAGE_BODY) {\n        const stateCopy = JSON.parse(JSON.stringify(state));\n        //console.log(action.messageBody)\n        stateCopy.newMessageBody = action.messageBody;\n        //this._callSubscriber(this._state);\n        return stateCopy;\n      }\n      //*********MESSAGE: SEND_MESSAGE ********/\n      if (action.type === SEND_MESSAGE) {\n        const stateCopy = JSON.parse(JSON.stringify(state));\n        const messageBody = stateCopy.newMessageBody\n        stateCopy.messages.push({ id: 5, message: messageBody })\n        /* ************* messages: [\n          { id: 1, message: \"Hi !\" }, */\n          stateCopy.newMessageBody = '';\n        //this._callSubscriber(this._state);\n        return state;\n      }\n\n    return state\n}\n\nconst sendMessageCreator = () => ({type: SEND_MESSAGE});\n\nconst updateNewMessageBodyCreator = msgBody => (\n  {\n    type: UPDATE_NEW_MESSAGE_BODY,\n    messageBody: msgBody\n  }\n);\n\nexport {sendMessageCreator, updateNewMessageBodyCreator}\nexport default dialogsReducer"],"mappings":"AACA,MAAMA,uBAAuB,GAAG,yBAAhC;AACA,MAAMC,YAAY,GAAG,cAArB;AAEA,MAAMC,YAAY,GAAG;EACnBC,OAAO,EAAE,CACP;IAAEC,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CADO,EAEP;IAAED,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CAFO,EAGP;IAAED,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CAHO,EAIP;IAAED,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CAJO,EAKP;IAAED,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CALO,EAMP;IAAED,EAAE,EAAE,CAAN;IAASC,IAAI,EAAE;EAAf,CANO,CADU;EASnBC,QAAQ,EAAE,CACR;IAAEF,EAAE,EAAE,CAAN;IAASG,OAAO,EAAE;EAAlB,CADQ,EAER;IAAEH,EAAE,EAAE,CAAN;IAASG,OAAO,EAAE;EAAlB,CAFQ,EAGR;IAAEH,EAAE,EAAE,CAAN;IAASG,OAAO,EAAE;EAAlB,CAHQ,CATS;EAcnBC,cAAc,EAAE;AAdG,CAArB;;AAiBA,MAAMC,cAAc,GAAG,YAAgC;EAAA,IAA/BC,KAA+B,uEAAzBR,YAAyB;EAAA,IAAXS,MAAW;;EACrD;EACE;EACA,IAAIA,MAAM,CAACC,IAAP,KAAgBZ,uBAApB,EAA6C;IACzC,MAAMa,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,KAAf,CAAX,CAAlB,CADyC,CAEzC;;IACAG,SAAS,CAACL,cAAV,GAA2BG,MAAM,CAACM,WAAlC,CAHyC,CAIzC;;IACA,OAAOJ,SAAP;EACD,CATgD,CAUjD;;;EACA,IAAIF,MAAM,CAACC,IAAP,KAAgBX,YAApB,EAAkC;IAChC,MAAMY,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,KAAf,CAAX,CAAlB;IACA,MAAMO,WAAW,GAAGJ,SAAS,CAACL,cAA9B;IACAK,SAAS,CAACP,QAAV,CAAmBY,IAAnB,CAAwB;MAAEd,EAAE,EAAE,CAAN;MAASG,OAAO,EAAEU;IAAlB,CAAxB;IACA;AACR;;IACUJ,SAAS,CAACL,cAAV,GAA2B,EAA3B,CAN8B,CAOhC;;IACA,OAAOE,KAAP;EACD;;EAEH,OAAOA,KAAP;AACH,CAvBD;;AAyBA,MAAMS,kBAAkB,GAAG,OAAO;EAACP,IAAI,EAAEX;AAAP,CAAP,CAA3B;;AAEA,MAAMmB,2BAA2B,GAAGC,OAAO,KACzC;EACET,IAAI,EAAEZ,uBADR;EAEEiB,WAAW,EAAEI;AAFf,CADyC,CAA3C;;AAOA,SAAQF,kBAAR,EAA4BC,2BAA5B;AACA,eAAeX,cAAf"},"metadata":{},"sourceType":"module"}