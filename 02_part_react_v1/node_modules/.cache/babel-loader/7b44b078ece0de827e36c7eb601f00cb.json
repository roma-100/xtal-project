{"ast":null,"code":"import { userAPI } from '../api/api';\nconst ADD_POST = 'ADD-POST';\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT';\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\nconst initialState = {\n  posts: [{\n    id: 1,\n    message: \"This is my first post.\",\n    likesCount: 12\n  }, {\n    id: 1,\n    message: \"Second post. Hello everybody\",\n    likesCount: 11\n  }],\n  newPostText: \"it-kamasutra\",\n  profile: null\n};\n\nconst profileReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //debugger\n  //********* POST: ADD_POST **** ****/\n  if (action.type === ADD_POST) {\n    const stateCopy = { ...state,\n      newPostText: \"\",\n      posts: [...state.posts, {\n        id: 3,\n        message: state.newPostText,\n        likesCount: 0\n      }]\n    };\n    return stateCopy;\n  } //*********POST: UPDATE_NEW_POST_TEXT ********/\n\n\n  if (action.type === UPDATE_NEW_POST_TEXT) {\n    return { ...state,\n      newPostText: action.newText\n    };\n  }\n\n  if (action.type === SET_USER_PROFILE) {\n    //debugger\n    return { ...state,\n      profile: action.profile\n    };\n  }\n\n  return state;\n};\n\nexport const addPostActionCreator = () => ({\n  type: ADD_POST\n});\nexport const updateNewPostTextActionCreator = text => ({\n  type: UPDATE_NEW_POST_TEXT,\n  newText: text\n});\nexport const setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\nexport const getUserProfileThunk = userId => {\n  return dispatch => {\n    userAPI.getProfile(userId).then(data => {\n      this.props.setUserProfile(data);\n    });\n  };\n};\n/* export const unfollowThunkCreator = (uderId) =>{\n  //debugger\n  \n return (dispatch) => {\n  dispatch(setIsFollowingProgress(true, uderId))\n  userAPI.unfollow(uderId)\n      .then((data) => {\n        if (data.resultCode == 0){\n          dispatch(unfollow(uderId))\n        }\n        dispatch(setIsFollowingProgress(false, uderId))\n      }\n    )\n  }\n} */\n//export {addPostActionCreator, updateNewPostTextActionCreator}\n\nexport default profileReducer;","map":{"version":3,"names":["userAPI","ADD_POST","UPDATE_NEW_POST_TEXT","SET_USER_PROFILE","initialState","posts","id","message","likesCount","newPostText","profile","profileReducer","state","action","type","stateCopy","newText","addPostActionCreator","updateNewPostTextActionCreator","text","setUserProfile","getUserProfileThunk","userId","dispatch","getProfile","then","data","props"],"sources":["/home/roman/wwwl/30_react/react_kabzda2/src/redux/reducer-profile.js"],"sourcesContent":["import {userAPI} from '../api/api'\n\nconst ADD_POST = 'ADD-POST'\nconst UPDATE_NEW_POST_TEXT = 'UPDATE-NEW-POST-TEXT'\nconst SET_USER_PROFILE = 'SET-USER-PROFILE'\n\nconst initialState = {\n  posts: [\n    { id: 1, message: \"This is my first post.\", likesCount: 12 },\n    { id: 1, message: \"Second post. Hello everybody\", likesCount: 11 },\n  ],\n  newPostText: \"it-kamasutra\",\n  profile: null\n}\n\nconst profileReducer = (state=initialState, action) => {\n    //debugger\n    //********* POST: ADD_POST **** ****/\n    if (action.type === ADD_POST) {\n      const stateCopy = {\n        ...state,\n        newPostText: \"\",\n        posts: [\n          ...state.posts,\n          {\n            id: 3,\n            message: state.newPostText,\n            likesCount: 0,\n          },\n        ],\n      };\n      return stateCopy;\n    }\n      //*********POST: UPDATE_NEW_POST_TEXT ********/\n      if (action.type === UPDATE_NEW_POST_TEXT) {\n        return (\n          {...state, \n          newPostText: action.newText}\n        )\n      }\n      if (action.type === SET_USER_PROFILE) {\n        //debugger\n        return (\n          {...state, \n          profile: action.profile}\n        )\n      }\n    return state\n}\n\n\nexport const addPostActionCreator = () => ({type: ADD_POST});\n\nexport const updateNewPostTextActionCreator = text => (\n  {type: UPDATE_NEW_POST_TEXT,\n    newText: text}\n);\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\n\nexport const getUserProfileThunk = (userId) =>{\n  return (dispatch) => {\n    userAPI.getProfile(userId)\n    .then (data => {\n      this.props.setUserProfile(data);\n    })\n  }\n}\n\n/* export const unfollowThunkCreator = (uderId) =>{\n  //debugger\n  \n return (dispatch) => {\n  dispatch(setIsFollowingProgress(true, uderId))\n  userAPI.unfollow(uderId)\n      .then((data) => {\n        if (data.resultCode == 0){\n          dispatch(unfollow(uderId))\n        }\n        dispatch(setIsFollowingProgress(false, uderId))\n      }\n    )\n  }\n} */\n\n//export {addPostActionCreator, updateNewPostTextActionCreator}\nexport default profileReducer"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,YAAtB;AAEA,MAAMC,QAAQ,GAAG,UAAjB;AACA,MAAMC,oBAAoB,GAAG,sBAA7B;AACA,MAAMC,gBAAgB,GAAG,kBAAzB;AAEA,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,CACL;IAAEC,EAAE,EAAE,CAAN;IAASC,OAAO,EAAE,wBAAlB;IAA4CC,UAAU,EAAE;EAAxD,CADK,EAEL;IAAEF,EAAE,EAAE,CAAN;IAASC,OAAO,EAAE,8BAAlB;IAAkDC,UAAU,EAAE;EAA9D,CAFK,CADY;EAKnBC,WAAW,EAAE,cALM;EAMnBC,OAAO,EAAE;AANU,CAArB;;AASA,MAAMC,cAAc,GAAG,YAAgC;EAAA,IAA/BC,KAA+B,uEAAzBR,YAAyB;EAAA,IAAXS,MAAW;;EACnD;EACA;EACA,IAAIA,MAAM,CAACC,IAAP,KAAgBb,QAApB,EAA8B;IAC5B,MAAMc,SAAS,GAAG,EAChB,GAAGH,KADa;MAEhBH,WAAW,EAAE,EAFG;MAGhBJ,KAAK,EAAE,CACL,GAAGO,KAAK,CAACP,KADJ,EAEL;QACEC,EAAE,EAAE,CADN;QAEEC,OAAO,EAAEK,KAAK,CAACH,WAFjB;QAGED,UAAU,EAAE;MAHd,CAFK;IAHS,CAAlB;IAYA,OAAOO,SAAP;EACD,CAjBkD,CAkBjD;;;EACA,IAAIF,MAAM,CAACC,IAAP,KAAgBZ,oBAApB,EAA0C;IACxC,OACE,EAAC,GAAGU,KAAJ;MACAH,WAAW,EAAEI,MAAM,CAACG;IADpB,CADF;EAID;;EACD,IAAIH,MAAM,CAACC,IAAP,KAAgBX,gBAApB,EAAsC;IACpC;IACA,OACE,EAAC,GAAGS,KAAJ;MACAF,OAAO,EAAEG,MAAM,CAACH;IADhB,CADF;EAID;;EACH,OAAOE,KAAP;AACH,CAjCD;;AAoCA,OAAO,MAAMK,oBAAoB,GAAG,OAAO;EAACH,IAAI,EAAEb;AAAP,CAAP,CAA7B;AAEP,OAAO,MAAMiB,8BAA8B,GAAGC,IAAI,KAChD;EAACL,IAAI,EAAEZ,oBAAP;EACEc,OAAO,EAAEG;AADX,CADgD,CAA3C;AAIP,OAAO,MAAMC,cAAc,GAAIV,OAAD,KAAc;EAACI,IAAI,EAAEX,gBAAP;EAAyBO;AAAzB,CAAd,CAAvB;AAEP,OAAO,MAAMW,mBAAmB,GAAIC,MAAD,IAAW;EAC5C,OAAQC,QAAD,IAAc;IACnBvB,OAAO,CAACwB,UAAR,CAAmBF,MAAnB,EACCG,IADD,CACOC,IAAI,IAAI;MACb,KAAKC,KAAL,CAAWP,cAAX,CAA0BM,IAA1B;IACD,CAHD;EAID,CALD;AAMD,CAPM;AASP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,eAAef,cAAf"},"metadata":{},"sourceType":"module"}