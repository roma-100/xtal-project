{"ast":null,"code":"var _jsxFileName = \"/home/roman/wwwl/085_react/react_kabzda2/src/components/Users/UsersContainer.jsx\";\nimport React from \"react\";\nimport { followAC, unfollowAC, setUsersAC, setCurrentPageAC, setTotalUsersCountAC, setIsFetchingAC } from '../../redux/reducer-users'; //{followAC, unfollowAC, setUsersAC} //reducer-users\n\nimport { connect } from 'react-redux';\nimport * as axios from \"axios\";\nimport Users from './Users';\nimport preloader from '.././../assets/images/preloader.gif'; //***** Start insert UsersAPIComponent */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass UsersContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.firstCall = true;\n\n    this.initUsers = () => {\n      const httpQuery = `https://social-network.samuraijs.com/api/1.0/users?page=${this.props.currentPage}&count=${this.props.pageSize}`;\n      axios.get(httpQuery).then(response => {\n        const extractData = response.data.items; //debugger\n\n        this.props.setUsers(extractData);\n        this.props.setTotalUsersCount(response.data.totalCount);\n      });\n      this.props.setUsers([]); //debugger\n    };\n\n    this.showInitButton = () => {\n      if (this.props.users.length === 0) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.initUsers,\n          children: \"initData\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 14\n        }, this);\n      }\n\n      return null;\n    };\n\n    this.onPageChanged = pageNumber => {\n      //debugger\n      this.props.setCurrentPage(pageNumber);\n      const httpQuery = `https://social-network.samuraijs.com/api/1.0/users?page=${pageNumber}&count=${this.props.pageSize}`;\n      axios.get(httpQuery).then(response => {\n        const extractData = response.data.items; //debugger\n\n        this.props.setUsers(extractData);\n      });\n    };\n  }\n\n  componentDidMount() {\n    th;\n    console.log(\"componentDidMount firstCall: \" + this.firstCall);\n\n    if (this.firstCall) {\n      this.initUsers();\n    }\n\n    this.firstCall = false;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.isFetching && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: preloader,\n        className: \"preloader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: this.showInitButton()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Users, {\n        users: this.props.users,\n        follow: this.props.follow,\n        unfollow: this.props.unfollow,\n        onPageChanged: this.onPageChanged,\n        currentPage: this.props.currentPage,\n        pageSize: this.props.pageSize,\n        totalUsersCount: this.props.totalUsersCount\n        /* isFetching={this.props.isFetching} */\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n} //***** End insert UsersAPIComponent */\n// Возвращаем только те данные, которые нужны ребенку\n\n\nconst mapStateToProps = state => {\n  //console.log('hello!')\n  //debugger\n  return {\n    users: state.usersPage.users,\n    //usersPage: usersReducer //property is diferent because\n    pageSize: state.usersPage.pageSize,\n    //limit users\n    totalUsersCount: state.usersPage.totalUsersCount,\n    currentPage: state.usersPage.currentPage,\n    isFetching: state.usersPage.isFetching\n  };\n}; //Создаем dispatch\n\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n    //перечень данных, которые поступают в результате событий от ребенка\n    follow: userID => {\n      dispatch(followAC(userID));\n    },\n    //будет props.follow обр связь с Users.jsx\n    unfollow: userID => {\n      dispatch(unfollowAC(userID));\n    },\n    setUsers: users => {\n      dispatch(setUsersAC(users));\n    },\n    setCurrentPage: pageNumber => {\n      dispatch(setCurrentPageAC(pageNumber));\n    },\n    setTotalUsersCount: totalCount => {\n      dispatch(setTotalUsersCountAC(totalCount));\n    },\n    setIsFetchingAC: isFetching => {\n      dispatch(setIsFetchingAC(isFetching));\n    }\n  };\n};\n/* const UsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer); */\n//debugger\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\n/* import React from \"react\";\n\nconst Users = (props) => {\n    return (\n        <div>\n            USERDDDDD\n        </div>\n    )\n}\n\nexport default Users */","map":{"version":3,"names":["React","followAC","unfollowAC","setUsersAC","setCurrentPageAC","setTotalUsersCountAC","setIsFetchingAC","connect","axios","Users","preloader","UsersContainer","Component","constructor","props","firstCall","initUsers","httpQuery","currentPage","pageSize","get","then","response","extractData","data","items","setUsers","setTotalUsersCount","totalCount","showInitButton","users","length","onPageChanged","pageNumber","setCurrentPage","componentDidMount","th","console","log","render","isFetching","follow","unfollow","totalUsersCount","mapStateToProps","state","usersPage","mapDispatchToProps","dispatch","userID"],"sources":["/home/roman/wwwl/085_react/react_kabzda2/src/components/Users/UsersContainer.jsx"],"sourcesContent":["import React from \"react\";\nimport { followAC, \n         unfollowAC, \n         setUsersAC, \n         setCurrentPageAC,\n         setTotalUsersCountAC,\n         setIsFetchingAC } from '../../redux/reducer-users'\n//{followAC, unfollowAC, setUsersAC} //reducer-users\nimport { connect } from 'react-redux'\nimport * as axios from \"axios\";\nimport Users from './Users';\nimport preloader from '.././../assets/images/preloader.gif'\n\n//***** Start insert UsersAPIComponent */\n\n\n\nclass UsersContainer extends React.Component {\n  firstCall = true;\n  constructor(props) {\n    super(props);\n  }\n\n  initUsers = () => {\n    const httpQuery = `https://social-network.samuraijs.com/api/1.0/users?page=${this.props.currentPage}&count=${this.props.pageSize}`;\n    axios.get(httpQuery).then((response) => {\n      const extractData = response.data.items;\n      //debugger\n      this.props.setUsers(extractData);\n      this.props.setTotalUsersCount(response.data.totalCount);\n    });\n    this.props.setUsers([]);\n    //debugger\n  };\n  showInitButton = () => {\n    if (this.props.users.length === 0) {\n      return <button onClick={this.initUsers}>initData</button>;\n    }\n    return null;\n  };\n\n  onPageChanged = (pageNumber) => {\n    //debugger\n    this.props.setCurrentPage(pageNumber);\n    const httpQuery = `https://social-network.samuraijs.com/api/1.0/users?page=${pageNumber}&count=${this.props.pageSize}`;\n    axios.get(httpQuery).then((response) => {\n      const extractData = response.data.items;\n      //debugger\n      this.props.setUsers(extractData);\n    });\n  };\n\n  componentDidMount() {\n    th\n    console.log(\"componentDidMount firstCall: \" + this.firstCall);\n    if (this.firstCall) {\n      this.initUsers();\n    }\n    this.firstCall = false;\n  }\n  render() {\n    return (\n      <>\n        { this.props.isFetching && <img src={preloader} className=\"preloader\"/> }\n        <div className=\"\">{this.showInitButton()}</div>\n\n        <Users\n          users={this.props.users}\n          follow={this.props.follow}\n          unfollow={this.props.unfollow}\n          onPageChanged={this.onPageChanged}\n          currentPage={this.props.currentPage}\n          pageSize={this.props.pageSize}\n          totalUsersCount = {this.props.totalUsersCount}\n          /* isFetching={this.props.isFetching} */\n        />\n        \n      </>\n    );\n  }\n}\n//***** End insert UsersAPIComponent */\n\n// Возвращаем только те данные, которые нужны ребенку\nconst mapStateToProps = (state) => {\n  //console.log('hello!')\n  //debugger\n  return {\n    users: state.usersPage.users, //usersPage: usersReducer //property is diferent because\n    pageSize: state.usersPage.pageSize, //limit users\n    totalUsersCount: state.usersPage.totalUsersCount,\n    currentPage: state.usersPage.currentPage,\n    isFetching: state.usersPage.isFetching\n  }\n}\n//Создаем dispatch\nconst mapDispatchToProps = (dispatch) => {  \n  return { //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n    //перечень данных, которые поступают в результате событий от ребенка\n    follow: userID => {dispatch(followAC(userID))}, //будет props.follow обр связь с Users.jsx\n    unfollow: userID => {dispatch(unfollowAC(userID))},\n    setUsers: users => {dispatch(setUsersAC(users))},\n    setCurrentPage: pageNumber => {dispatch(setCurrentPageAC(pageNumber))},\n    setTotalUsersCount: totalCount => {dispatch(setTotalUsersCountAC(totalCount))},\n    setIsFetchingAC: isFetching => {dispatch(setIsFetchingAC(isFetching))}\n  }\n}\n\n/* const UsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer); */\n//debugger\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\n\n/* import React from \"react\";\n\nconst Users = (props) => {\n    return (\n        <div>\n            USERDDDDD\n        </div>\n    )\n}\n\nexport default Users */"],"mappings":"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"},"metadata":{},"sourceType":"module"}