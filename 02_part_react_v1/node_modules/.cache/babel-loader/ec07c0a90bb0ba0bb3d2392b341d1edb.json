{"ast":null,"code":"var _jsxFileName = \"/home/roman/wwwl/30_react/react_kabzda2/src/components/Users/UsersContainer.jsx\";\nimport React from \"react\";\nimport { follow, unfollow, setUsers, setCurrentPage, setTotalUsersCount, setIsFetching, setIsFollowingProgress, getUsersThunkCreator, followThunkCreator, unfollowThunkCreator } from '../../redux/reducer-users'; //{followAC, unfollowAC, setUsersAC} //reducer-users\n\nimport { connect } from 'react-redux';\nimport * as axios from \"axios\";\nimport Users from './Users';\nimport Preloader from '../../components/commonBlocks/Preloader/PreloaderWaive';\nimport { userAPI } from '../../api/api';\n/* import Preloader from '../../components/commonBlocks/Preloader/PreloaderRing' */\n\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\"; //***** Start insert UsersAPIComponent */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass UsersContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.firstCall = true;\n\n    this.initUsers = () => {\n      //axios({timeout: 5000}) //Increase time of spiner\n      //apply Thunk trick\n      this.props.getUsersThunkCreator(this.props.currentPage, this.props.pageSize);\n      /*     this.props.setIsFetching (true)\n          userAPI.getUsers(this.props.currentPage, this.props.pageSize) //from api\n          .then((data) => {\n            const extractData = data.items;\n            //debugger\n            this.props.setIsFetching (false)\n            this.props.setUsers(extractData);\n            this.props.setTotalUsersCount(data.totalCount);\n          }); */\n      //this.props.setUsers([]);\n      //debugger\n    };\n\n    this.showInitButton = () => {\n      if (this.props.users.length === 0) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.initUsers,\n          children: \"initData\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 14\n        }, this);\n      }\n\n      return null;\n    };\n\n    this.onPageChanged = pageNumber => {\n      //debugger\n      this.props.getUsersThunkCreator(pageNumber, this.props.pageSize);\n      /*     this.props.setIsFetching (true)\n          this.props.setCurrentPage(pageNumber);\n          userAPI.getUsers(pageNumber, this.props.pageSize)\n          .then((data) => {\n            const extractData = data.items;\n            this.props.setIsFetching (false)\n            this.props.setUsers(extractData);\n          }); */\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount firstCall: \" + this.firstCall);\n\n    if (this.firstCall) {\n      this.initUsers();\n    }\n\n    this.firstCall = false;\n    /* this.props.setIsFetchingAC (false) */\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.isFetching && /*#__PURE__*/_jsxDEV(Preloader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(Users, {\n        users: this.props.users\n        /*           follow={this.props.follow}\n                  unfollow={this.props.unfollow} */\n        ,\n        onPageChanged: this.onPageChanged,\n        currentPage: this.props.currentPage,\n        pageSize: this.props.pageSize,\n        totalUsersCount: this.props.totalUsersCount\n        /* setIsFollowingProgress = {this.props.setIsFollowingProgress} */\n        ,\n        followingInProgress: this.props.followingInProgress,\n        followThunkCreator: this.props.followThunkCreator,\n        unfollowThunkCreator: this.props.unfollowThunkCreator\n        /* isFetching={this.props.isFetching} */\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n} //***** End insert UsersAPIComponent */\n// Возвращаем только те данные, которые нужны ребенку\n\n\nconst mapStateToProps = state => {\n  //console.log('hello!')\n  //debugger\n  //window.aa = state.usersPage\n  return {\n    users: state.usersPage.users,\n    //usersPage: usersReducer //property is diferent because\n    pageSize: state.usersPage.pageSize,\n    //limit users\n    totalUsersCount: state.usersPage.totalUsersCount,\n    currentPage: state.usersPage.currentPage,\n    isFetching: state.usersPage.isFetching,\n    followingInProgress: state.usersPage.followingInProgress\n  };\n}; //Создаем dispatch\n\n/* const mapDispatchToProps = (dispatch) => {  \n  return { //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n    //перечень данных, которые поступают в результате событий от ребенка\n    follow: userID => {dispatch(followAC(userID))}, //будет props.follow обр связь с Users.jsx\n    unfollow: userID => {dispatch(unfollowAC(userID))},\n    setUsers: users => {dispatch(setUsersAC(users))},\n    setCurrentPage: pageNumber => {dispatch(setCurrentPageAC(pageNumber))},\n    setTotalUsersCount: totalCount => {dispatch(setTotalUsersCountAC(totalCount))},\n    setIsFetchingAC: isFetching => {dispatch(setIsFetchingAC(isFetching))}\n  }\n} */\n\n\nconst mapDispatchToProps = {\n  //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n  //перечень данных, которые поступают в результате событий от ребенка\n  follow,\n  //будет props.follow обр связь с Users.jsx\n  unfollow,\n  setCurrentPage,\n  setTotalUsersCount,\n  setIsFetching,\n  setIsFollowingProgress,\n  getUsersThunkCreator,\n  followThunkCreator,\n  unfollowThunkCreator\n};\n/* const UsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer); */\n//debugger\n\n/* \nconst ComplexProfileContainer = compose(\n  connect(mapStateToProps, mapDispatchToProps), \n  withRouter,\n  withAuthRedirect\n  )(ProfileContainer)\n\nconst ComplexUsersContainer = compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withAuthRedirect\n)\n(UsersContainer)\n  \n*/\n//export default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\n//const ComplexUsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer)\n\nconst ComplexUsersContainer = compose(connect(mapStateToProps, mapDispatchToProps), withAuthRedirect)(UsersContainer);\nexport default ComplexUsersContainer;","map":{"version":3,"names":["React","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","setIsFetching","setIsFollowingProgress","getUsersThunkCreator","followThunkCreator","unfollowThunkCreator","connect","axios","Users","Preloader","userAPI","withAuthRedirect","UsersContainer","Component","constructor","props","firstCall","initUsers","currentPage","pageSize","showInitButton","users","length","onPageChanged","pageNumber","componentDidMount","console","log","render","isFetching","totalUsersCount","followingInProgress","mapStateToProps","state","usersPage","mapDispatchToProps","ComplexUsersContainer","compose"],"sources":["/home/roman/wwwl/30_react/react_kabzda2/src/components/Users/UsersContainer.jsx"],"sourcesContent":["import React from \"react\";\nimport { follow, \n         unfollow, \n         setUsers, \n         setCurrentPage,\n         setTotalUsersCount,\n         setIsFetching,\n         setIsFollowingProgress,\n         getUsersThunkCreator,\n         followThunkCreator,\n         unfollowThunkCreator } from '../../redux/reducer-users'\n//{followAC, unfollowAC, setUsersAC} //reducer-users\nimport { connect } from 'react-redux'\nimport * as axios from \"axios\";\nimport Users from './Users';\nimport Preloader from '../../components/commonBlocks/Preloader/PreloaderWaive'\nimport {userAPI} from '../../api/api'\n/* import Preloader from '../../components/commonBlocks/Preloader/PreloaderRing' */\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\n\n//***** Start insert UsersAPIComponent */\n \n\n\nclass UsersContainer extends React.Component {\n  firstCall = true;\n  constructor(props) {\n    super(props);\n  }\n\n  initUsers = () => {\n    //axios({timeout: 5000}) //Increase time of spiner\n    //apply Thunk trick\n    this.props.getUsersThunkCreator(this.props.currentPage, this.props.pageSize)\n/*     this.props.setIsFetching (true)\n    userAPI.getUsers(this.props.currentPage, this.props.pageSize) //from api\n    .then((data) => {\n      const extractData = data.items;\n      //debugger\n      this.props.setIsFetching (false)\n      this.props.setUsers(extractData);\n      this.props.setTotalUsersCount(data.totalCount);\n    }); */\n\n    //this.props.setUsers([]);\n    //debugger\n    \n  };\n  showInitButton = () => {\n    if (this.props.users.length === 0) {\n      \n      return <button onClick={this.initUsers}>initData</button>;\n    }\n    return null;\n  };\n\n  onPageChanged = (pageNumber) => {\n    //debugger\n    this.props.getUsersThunkCreator(pageNumber, this.props.pageSize)\n/*     this.props.setIsFetching (true)\n    this.props.setCurrentPage(pageNumber);\n    userAPI.getUsers(pageNumber, this.props.pageSize)\n    .then((data) => {\n      const extractData = data.items;\n      this.props.setIsFetching (false)\n      this.props.setUsers(extractData);\n    }); */\n  };\n\n  componentDidMount() {\n    \n    \n    console.log(\"componentDidMount firstCall: \" + this.firstCall);\n    if (this.firstCall) {\n      this.initUsers();\n    }\n    this.firstCall = false;\n\n    /* this.props.setIsFetchingAC (false) */\n  }\n  render() {\n    return (\n      <>\n        { this.props.isFetching && <Preloader /> }\n        {/* <div className=\"\">{this.showInitButton()}</div> */}\n\n        <Users\n          users={this.props.users}\n/*           follow={this.props.follow}\n          unfollow={this.props.unfollow} */\n          onPageChanged={this.onPageChanged}\n          currentPage={this.props.currentPage}\n          pageSize={this.props.pageSize}\n          totalUsersCount = {this.props.totalUsersCount}\n          /* setIsFollowingProgress = {this.props.setIsFollowingProgress} */\n          followingInProgress = {this.props.followingInProgress}\n          followThunkCreator = {this.props.followThunkCreator}\n          unfollowThunkCreator = {this.props.unfollowThunkCreator}\n\n          /* isFetching={this.props.isFetching} */\n        />\n        \n      </>\n    );\n  }\n}\n//***** End insert UsersAPIComponent */\n\n// Возвращаем только те данные, которые нужны ребенку\nconst mapStateToProps = (state) => {\n  //console.log('hello!')\n  //debugger\n  //window.aa = state.usersPage\n  return {\n    users: state.usersPage.users, //usersPage: usersReducer //property is diferent because\n    pageSize: state.usersPage.pageSize, //limit users\n    totalUsersCount: state.usersPage.totalUsersCount,\n    currentPage: state.usersPage.currentPage,\n    isFetching: state.usersPage.isFetching,\n    followingInProgress: state.usersPage.followingInProgress\n  }\n}\n//Создаем dispatch\n/* const mapDispatchToProps = (dispatch) => {  \n  return { //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n    //перечень данных, которые поступают в результате событий от ребенка\n    follow: userID => {dispatch(followAC(userID))}, //будет props.follow обр связь с Users.jsx\n    unfollow: userID => {dispatch(unfollowAC(userID))},\n    setUsers: users => {dispatch(setUsersAC(users))},\n    setCurrentPage: pageNumber => {dispatch(setCurrentPageAC(pageNumber))},\n    setTotalUsersCount: totalCount => {dispatch(setTotalUsersCountAC(totalCount))},\n    setIsFetchingAC: isFetching => {dispatch(setIsFetchingAC(isFetching))}\n  }\n} */\nconst mapDispatchToProps = {  \n   //props.follow(userID), props.unfollow(userID)... <- от д/очернего объекта\n    //перечень данных, которые поступают в результате событий от ребенка\n    follow, //будет props.follow обр связь с Users.jsx\n    unfollow,\n    setCurrentPage,\n    setTotalUsersCount,\n    setIsFetching,\n    setIsFollowingProgress,\n    getUsersThunkCreator,\n    followThunkCreator,\n    unfollowThunkCreator\n}\n\n\n\n/* const UsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer); */\n//debugger\n/* \nconst ComplexProfileContainer = compose(\n  connect(mapStateToProps, mapDispatchToProps), \n  withRouter,\n  withAuthRedirect\n  )(ProfileContainer)\n\nconst ComplexUsersContainer = compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withAuthRedirect\n)\n(UsersContainer)\n  \n*/\n//export default connect(mapStateToProps, mapDispatchToProps)(UsersContainer);\n\n//const ComplexUsersContainer = connect(mapStateToProps, mapDispatchToProps)(UsersContainer)\n\nconst ComplexUsersContainer = compose(\n    connect(mapStateToProps, mapDispatchToProps),\n    withAuthRedirect\n  )(UsersContainer)\n\nexport default ComplexUsersContainer"],"mappings":"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"},"metadata":{},"sourceType":"module"}